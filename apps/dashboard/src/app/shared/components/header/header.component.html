<div class="custom-portal">
    <ng-container #viewContainer />
</div>

<header tuiNavigationHeader class="pitaia-header">
    <!-- Mobile menu toggle button -->
    <button
        class="mobile-menu-btn"
        tuiIconButton
        type="button"
        title="Menu"
        aria-label="Abrir menu de navegação"
        (click)="onMenuToggle()"
    >
        <tui-icon icon="@tui.menu" />
    </button>

    <!-- Desktop drawer button -->
    <button
        class="desktop-drawer-btn"
        title="Menu"
        tuiIconButton
        tuiNavigationDrawer
        type="button"
        [(open)]="open"
    >
        <tui-data-list>
            <tui-opt-group
                *ngFor="let group of drawer | keyvalue"
                [label]="group.key"
            >
                <a
                    *ngFor="let item of group.value"
                    tuiOption
                    [routerLink]="item.route"
                    (click)="open = false"
                >
                    <tui-icon [icon]="item.icon" />
                    {{ item.name }}
                </a>
            </tui-opt-group>
        </tui-data-list>
    </button>

    <span tuiNavigationLogo class="logo">
        <tui-icon icon="@tui.home" />
        <span tuiFade class="logo-text">Pitaia</span>
    </span>

    <span tuiNavigationSegments class="nav-segments">
        <button
            appearance="secondary-grayscale"
            tuiButton
            type="button"
            routerLink="/pos"
        >
            PDV
        </button>
        <button
            appearance="secondary-grayscale"
            tuiButton
            type="button"
            routerLink="/orders"
        >
            Pedidos
        </button>
        <button
            appearance="secondary-grayscale"
            tuiButton
            type="button"
            routerLink="/reports"
            class="hide-tablet"
        >
            Relatórios
        </button>
    </span>

    <hr />

    <button
        class="pitaia-primary-btn new-order-btn"
        iconStart="@tui.plus"
        tuiButton
        type="button"
        routerLink="/orders/new"
    >
        <span class="btn-text">Novo Pedido</span>
    </button>

    <button
        iconStart="@tui.bell"
        tuiIconButton
        type="button"
        title="Notificações"
        aria-label="Notificações"
    >
        <tui-badge-notification *ngIf="notifications() > 0" />
    </button>

    <button
        iconStart="@tui.printer"
        tuiIconButton
        type="button"
        title="Imprimir Pedidos"
        aria-label="Impressão"
        class="hide-mobile"
    >
    </button>

    <div
        [tuiDropdown]="userMenu"
        [tuiDropdownManual]="dropdownOpen"
        (tuiActiveZoneChange)="dropdownOpen = $event"
    >
        <button
            tuiIconButton
            type="button"
            aria-label="Menu do usuário"
            (click)="dropdownOpen = !dropdownOpen"
        >
            <tui-avatar [src]="null" [round]="true" />
        </button>
        <ng-template #userMenu>
            <tui-data-list>
                <a tuiOption routerLink="/profile">
                    <tui-icon icon="@tui.user" />
                    Meu Perfil
                </a>
                <a tuiOption routerLink="/settings">
                    <tui-icon icon="@tui.settings" />
                    Configurações
                </a>
                <hr />
                <button tuiOption type="button" (click)="logout()">
                    <tui-icon icon="@tui.log-out" />
                    Sair
                </button>
            </tui-data-list>
        </ng-template>
    </div>
</header>

